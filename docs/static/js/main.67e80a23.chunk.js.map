{"version":3,"sources":["WrapperError.js","Playground.js","schema/formArray.js","Storybook.js","Tabs.js","index.js"],"names":["WrapperError","state","error","undefined","this","setState","props","children","React","Component","examples","basic","formArray","constrainedBasic","constraintsWithRef","simpleSelector","formInForm","dynamicForm","Playground","useState","JSON","stringify","schema","setSchema","realSchema","setRealSchema","setError","value","setValue","label","selectedSchema","setSelectedSchema","ref","useRef","childRef","formRef","useEffect","current","reset","babelize","e","code","generatedCode","babel","presets","replace","trim","res","Function","func","_","className","style","marginTop","href","marginRight","htmlFor","possibleValues","Object","entries","transformer","onChange","mode","err","console","log","parse","color","backgroundColor","padding","flow","keys","onSubmit","d","alert","options","watch","unsaved","dispatch","changes","from","to","doc","length","insert","actions","submit","setRef","r","showGutter","Storybook","types","string","filter","setFilter","map","type","onClick","cursor","textDecoration","fontWeight","item","key","index","format","marginBottom","constraints","required","Tabs","tabs","defaultTab","page","setPage","data-bs-toggle","data-bs-target","aria-controls","aria-expanded","aria-label","id","find","content","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.67e80a23.chunk.js","sourcesContent":["import React from 'react'\n\nexport default class WrapperError extends React.Component {\n    state = {\n        error: undefined\n    }\n\n    componentDidCatch(error) {\n        this.setState({ error })\n    }\n\n    reset() {\n        this.setState({ error: undefined })\n    }\n\n    render() {\n        if (this.state.error)\n            return <div>Something wrong happened</div>\n        return this.props.children\n    }\n}","import React, { useState, useEffect, useRef } from 'react';\nimport { Form, CodeInput, SelectInput } from '@maif/react-forms'\n\nimport './App.css';\nimport 'bootstrap/dist/css/bootstrap.min.css'\n\nimport basic from './schema/basic.json';\nimport formArray from './schema/formArray';\nimport constrainedBasic from './schema/constrainedBasic.json';\nimport constraintsWithRef from './schema/constraintsWithRef.json';\nimport simpleSelector from './schema/selector.json';\nimport formInForm from './schema/formInForm.json';\nimport dynamicForm from './schema/dynamicForm.json';\nimport * as babel from 'babel-standalone'\nimport WrapperError from './WrapperError';\n\nconst examples = {\n  basic,\n  formArray,\n  constrainedBasic,\n  constraintsWithRef,\n  simpleSelector,\n  formInForm,\n  dynamicForm\n}\n\nexport const Playground = () => {\n  const [schema, setSchema] = useState(JSON.stringify(basic, 0, 2))\n  const [realSchema, setRealSchema] = useState(basic)\n  const [error, setError] = useState(undefined)\n  const [value, setValue] = useState()\n  const [selectedSchema, setSelectedSchema] = useState({ value: basic, label: \"basic\" })\n  const ref = useRef()\n  const childRef = useRef()\n  const formRef = useRef()\n\n  useEffect(() => {\n    if (childRef.current)\n      childRef.current.reset()\n    babelize(schema)\n  }, [schema])\n\n  useEffect(() => {\n    setError(undefined)\n  }, [realSchema])\n\n  const babelize = e => {\n    try {\n      const code = `() => { try { return ${(typeof e === 'object' ? JSON.stringify(e, null, 2) : e)} } catch(err) {} }`\n      const babelCode = babel.transform(code, { presets: ['react', 'es2015'] }).code;\n\n      const generatedCode = babelCode.replace('\"use strict\";', \"\").trim()\n      const func = new Function(\"React\", `return ${generatedCode}`);\n      const res = func(React)()\n      if (res)\n        setRealSchema(res)\n    } catch (_) {\n\n    }\n  }\n\n  return (\n      <div className=\"container\" style={{ marginTop: '70px' }}>\n        <em className='tagline px-0 py-2'>Choose a JSON schema below and check the generated form. Check the <a href='https://github.com/MAIF/react-forms'>documentation</a> for more details.</em>\n        <div className=\"d-flex\">\n          <div className='col-8' style={{ marginRight: '10px' }}>\n            <label htmlFor=\"selector\">Try with a schema</label>\n            <SelectInput\n              className=\"py-2\"\n              possibleValues={Object.entries(examples)}\n              transformer={([k, v]) => ({ label: k, value:v })}\n              value={selectedSchema}\n              onChange={e => {\n                setSelectedSchema(e)\n                setSchema(e)\n              }}\n            />\n            <CodeInput\n              mode=\"javascript\"\n              onChange={e => {\n                try {\n                  setSchema(e)\n                } catch (err) {\n                  console.log(err)\n                }\n              }}\n              value={typeof schema === 'object' ? JSON.stringify(schema, null, 2) : schema}\n            />\n            <label>Default value</label>\n            <CodeInput\n              mode=\"json\"\n              onChange={e => {\n                try {\n                  setValue(JSON.parse(e))\n                } catch (_) { }\n              }}\n              value={typeof value === 'object' ? JSON.stringify(value, null, 2) : value}\n            />\n          </div>\n          <div className='col-4 px-2'>\n            <label>Generated form</label>\n            {error && <span style={{ color: 'tomato' }}>{error}</span>}\n            <div style={{ backgroundColor: '#ececec', padding: '10px 15px' }}>\n              <WrapperError ref={childRef}>\n                <Form\n                  ref={formRef}\n                  schema={realSchema}\n                  value={value}\n                  flow={Object.keys(realSchema)}\n                  onSubmit={d => alert(JSON.stringify(d, null, 2))}\n                  options={{\n                    watch: unsaved => {\n                      ref?.current?.dispatch({\n                        changes: {\n                          from: 0,\n                          to: ref.current.state.doc.length,\n                          insert: JSON.stringify(unsaved, null, 2)\n                        }\n                      })\n                    },\n                    actions: {\n                      submit: {\n                        label: 'Try it'\n                      }\n                    }\n                  }}\n                />\n              </WrapperError>\n            </div>\n            <div className='py-2'>\n              <label>Form state</label>\n              <CodeInput\n                setRef={r => ref.current = r}\n                showGutter={false}\n                mode=\"json\"\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n  )\n}\n\nexport default Playground;\n","const schema = `{\n    \"users\": {\n        type: \"object\",\n        format: \"form\",\n        array: true,\n        onAfterChange: ({ setValue, entry, previousValue, value, getValue }) => {\n            if (value && previousValue) {\n                if (value.fullname !== previousValue.fullname) {\n                    const parts = value.fullname.split(' ')\n                    setValue(entry + '.firstname', parts[0])\n                    setValue(entry + '.lastname', parts[1])\n                }\n                else if (value.firstname !== previousValue.firstname) {\n                    const lastname = getValue(entry + '.lastname') || ''\n                    setValue(entry + '.fullname', (value.firstname || '') + ' ' + lastname)\n                }\n                else if (value.lastname !== previousValue.lastname) {\n                    console.log(value.lastname)\n                    const firstname = getValue(entry + '.firstname') || ''\n                    setValue(entry + '.fullname', firstname + ' ' + (value.lastname || ''))\n                }\n            }\n        },\n        schema: {\n            fullname: {\n                type: \"string\"\n            },\n            firstname: {\n                type: \"string\"\n            },\n            lastname: {\n                type: \"string\"\n            }\n        }\n    }\n}`\n\nexport default schema","import { Form, type as types, constraints } from \"@maif/react-forms\";\nimport React, { useState } from \"react\";\nimport WrapperError from \"./WrapperError\";\nimport schema from \"./schema/storybook.json\";\n\nconst Storybook = () => {\n  const [filter, setFilter] = useState(types.string);\n  return (\n    <div className=\"container\" style={{ marginTop: \"70px\" }}>\n      <div className=\"d-flex\">\n        <div className=\"col-3\" style={{ marginRight: \"10px\" }}>\n          <div\n            style={{\n              backgroundColor: \"#ececec\",\n              marginTop: \"25px\",\n              marginRight: \"15px\",\n              padding: \"15px\"\n            }}\n          >\n            <b>Filter</b>\n            <ul>\n              {Object.keys(types).map((type) => (\n                <li\n                  key={`filter-${type}`}\n                  onClick={() => setFilter(type)}\n                  style={{\n                    cursor: \"pointer\",\n                    textDecoration: \"underline\",\n                    fontWeight: type === filter ? \"bold\" : \"normal\"\n                  }}\n                >\n                  {type}\n                </li>\n              ))}\n            </ul>\n          </div>\n        </div>\n        <div className=\"col-9\" style={{ marginRight: \"10px\" }}>\n            {Object.keys(schema)\n              .map((item) => ({ key: item, ...schema[item] }))\n              .filter(({ type }) => filter === type)\n              .map(({ key, ...item }, index) => (\n                <WrapperError key={`form-${key}-${index}`}>\n                  <label style={{ fontWeight: \"bold\" }}>\n                    Input type {item.type}\n                    {item.format && ` (format: ${item.format})`}\n                  </label>\n                  <div\n                    style={{\n                      backgroundColor: \"#ececec\",\n                      padding: \"10px 15px\",\n                      marginBottom: \"15px\"\n                    }}\n                  >\n                    <Form\n                      schema={{\n                        [key]: {\n                          constraints: [\n                            constraints.required(`${key} is required`)\n                          ],\n                          ...item\n                        }\n                      }}\n                      flow={[key]}\n                      onSubmit={(d) => alert(JSON.stringify(d, null, 2))}\n                      options={{actions:{submit:{label:\"Show It!\"}}}}\n                    />\n                  </div>\n                </WrapperError>\n              ))}\n        </div>\n      </div>\n    </div>\n  );\n};\nexport default Storybook;\n","import React, { useState } from \"react\";\n\nconst Tabs = ({ tabs, defaultTab }) => {\n  const [page, setPage] = useState(defaultTab);\n\n  return (\n    <div className=\"my-md-4 bd-layout\">\n      <nav className=\"navbar navbar-expand-lg navbar-light bg-light fixed-top\">\n        <div className=\"container-fluid\">\n          <span className=\"navbar-brand\">react-forms playground</span>\n          <button\n            className=\"navbar-toggler\"\n            type=\"button\"\n            data-bs-toggle=\"collapse\"\n            data-bs-target=\"#navbarSupportedContent\"\n            aria-controls=\"navbarSupportedContent\"\n            aria-expanded=\"false\"\n            aria-label=\"Toggle navigation\"\n          >\n            <span className=\"navbar-toggler-icon\"></span>\n          </button>\n          <div className=\"collapse navbar-collapse\" id=\"navbarSupportedContent\">\n            <ul className=\"navbar-nav me-auto mb-2 mb-lg-0\">\n              {tabs.map(({ id, label }) => (\n                <li className=\"nav-item\">\n                  <span className=\"nav-link\" onClick={() => setPage(id)}>\n                    {label}\n                  </span>\n                </li>\n              ))}\n              <li className=\"nav-item\">\n                <a\n                  className=\"nav-link\"\n                  href=\"https://github.com/MAIF/react-forms#readme\"\n                >\n                  Documentation\n                </a>\n              </li>\n              <li className=\"nav-item\">\n                <a\n                  className=\"nav-link\"\n                  href=\"https://github.com/MAIF/react-forms\"\n                >\n                  Project\n                </a>\n              </li>\n            </ul>\n          </div>\n        </div>\n      </nav>\n      <div className=\"container\" style={{ marginTop: \"70px\" }}>\n        {tabs.find(({ id }) => id === page)?.content}\n      </div>\n    </div>\n  );\n};\nexport default Tabs;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport Playground from './Playground';\nimport Storybook from './Storybook';\nimport Tabs from './Tabs';\nimport ReleaseCandidate from './ReleaseCandidate'\n\nReactDOM.render(\n  <React.StrictMode>\n    <Tabs tabs={[\n      {\n        id: \"playground\",\n        label: \"Playground\",\n        content: <Playground />\n      },\n      // {\n      //   id: \"release-candidate\",\n      //   label: \"Release Candidate\",\n      //   content: <ReleaseCandidate />\n      // },\n      {\n        id: \"storybook\",\n        label: \"Storybook\",\n        content: <Storybook />\n      }]}\n      defaultTab=\"playground\" />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}