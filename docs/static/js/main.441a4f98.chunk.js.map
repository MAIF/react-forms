{"version":3,"sources":["WrapperError.js","Playground.js","schema/formArray.js","Storybook.js","Tabs.js","index.js"],"names":["WrapperError","state","error","undefined","this","setState","props","children","React","Component","examples","basic","formArray","constrainedBasic","constraintsWithRef","simpleSelector","formInForm","dynamicForm","Playground","useState","JSON","stringify","schema","setSchema","realSchema","setRealSchema","setError","value","setValue","label","selectedSchema","setSelectedSchema","ref","useRef","childRef","formRef","useEffect","current","reset","babelize","e","code","generatedCode","babel","presets","replace","trim","res","Function","func","_","className","style","marginTop","href","marginRight","htmlFor","options","Object","entries","map","onChange","mode","err","console","log","parse","color","backgroundColor","padding","flow","keys","onSubmit","d","watch","unsaved","dispatch","changes","from","to","doc","length","insert","actions","submit","setRef","r","showGutter","Storybook","types","string","filter","setFilter","type","onClick","cursor","textDecoration","fontWeight","item","key","index","format","marginBottom","constraints","required","alert","Tabs","tabs","defaultTab","page","setPage","id","find","content","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.441a4f98.chunk.js","sourcesContent":["import React from 'react'\n\nexport default class WrapperError extends React.Component {\n    state = {\n        error: undefined\n    }\n\n    componentDidCatch(error) {\n        this.setState({ error })\n    }\n\n    reset() {\n        this.setState({ error: undefined })\n    }\n\n    render() {\n        if (this.state.error)\n            return <div>Something wrong happened</div>\n        return this.props.children\n    }\n}","import React, { useState, useEffect, useRef } from 'react';\nimport { Form, CodeInput } from '@maif/react-forms'\nimport Select from 'react-select';\nimport './App.css';\nimport '@maif/react-forms/lib/index.css'\nimport 'bootstrap/dist/css/bootstrap.min.css'\n\nimport basic from './schema/basic.json';\nimport formArray from './schema/formArray';\nimport constrainedBasic from './schema/constrainedBasic.json';\nimport constraintsWithRef from './schema/constraintsWithRef.json';\nimport simpleSelector from './schema/selector.json';\nimport formInForm from './schema/formInForm.json';\nimport dynamicForm from './schema/dynamicForm.json';\nimport * as babel from 'babel-standalone'\nimport WrapperError from './WrapperError';\n\nconst examples = {\n  basic,\n  formArray,\n  constrainedBasic,\n  constraintsWithRef,\n  simpleSelector,\n  formInForm,\n  dynamicForm\n}\n\nexport const Playground = () => {\n  const [schema, setSchema] = useState(JSON.stringify(basic, 0, 2))\n  const [realSchema, setRealSchema] = useState(basic)\n  const [error, setError] = useState(undefined)\n  const [value, setValue] = useState()\n  const [selectedSchema, setSelectedSchema] = useState({ value: basic, label: \"basic\" })\n  const ref = useRef()\n  const childRef = useRef()\n  const formRef = useRef()\n\n  useEffect(() => {\n    if (childRef.current)\n      childRef.current.reset()\n    babelize(schema)\n  }, [schema])\n\n  useEffect(() => {\n    setError(undefined)\n  }, [realSchema])\n\n  const babelize = e => {\n    try {\n      const code = `() => { try { return ${(typeof e === 'object' ? JSON.stringify(e, null, 2) : e)} } catch(err) {} }`\n      const babelCode = babel.transform(code, { presets: ['react', 'es2015'] }).code;\n\n      const generatedCode = babelCode.replace('\"use strict\";', \"\").trim()\n      const func = new Function(\"React\", `return ${generatedCode}`);\n      const res = func(React)()\n      if (res)\n        setRealSchema(res)\n    } catch (_) {\n\n    }\n  }\n\n  return (\n      <div className=\"container\" style={{ marginTop: '70px' }}>\n        <em className='tagline px-0 py-2'>Choose a JSON schema below and check the generated form. Check the <a href='https://github.com/MAIF/react-forms'>documentation</a> for more details.</em>\n        <div className=\"d-flex\">\n          <div className='col-8' style={{ marginRight: '10px' }}>\n            <label htmlFor=\"selector\">Try with a schema</label>\n            <Select\n              className=\"py-2\"\n              options={Object.entries(examples).map(([k, v]) => ({ label: k, value: v }))}\n              value={selectedSchema}\n              onChange={e => {\n                setSelectedSchema(e)\n                setSchema(e.value)\n              }}\n            />\n            <CodeInput\n              mode=\"javascript\"\n              onChange={e => {\n                try {\n                  setSchema(e)\n                } catch (err) {\n                  console.log(err)\n                }\n              }}\n              value={typeof schema === 'object' ? JSON.stringify(schema, null, 2) : schema}\n            />\n            <label>Default value</label>\n            <CodeInput\n              mode=\"json\"\n              onChange={e => {\n                try {\n                  setValue(JSON.parse(e))\n                } catch (_) { }\n              }}\n              value={typeof value === 'object' ? JSON.stringify(value, null, 2) : value}\n            />\n          </div>\n          <div className='col-4 px-2'>\n            <label>Generated form</label>\n            {error && <span style={{ color: 'tomato' }}>{error}</span>}\n            <div style={{ backgroundColor: '#ececec', padding: '10px 15px' }}>\n              <WrapperError ref={childRef}>\n                <Form\n                  ref={formRef}\n                  schema={realSchema}\n                  value={value}\n                  flow={Object.keys(realSchema)}\n                  onSubmit={d => console.log(JSON.stringify(d, null, 4))}\n                  options={{\n                    watch: unsaved => {\n                      ref?.current?.dispatch({\n                        changes: {\n                          from: 0,\n                          to: ref.current.state.doc.length,\n                          insert: JSON.stringify(unsaved, null, 2)\n                        }\n                      })\n                    },\n                    actions: {\n                      submit: {\n                        label: 'Try it'\n                      }\n                    }\n                  }}\n                />\n              </WrapperError>\n            </div>\n            <div className='py-2'>\n              <label>Form state</label>\n              <CodeInput\n                setRef={r => ref.current = r}\n                showGutter={false}\n                mode=\"json\"\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n  )\n}\n\nexport default Playground;\n","const schema = `{\n    \"users\": {\n        type: \"object\",\n        format: \"form\",\n        array: true,\n        onAfterChange: ({ setValue, entry, previousValue, value, getValue }) => {\n            if (value && previousValue) {\n                if (value.fullname !== previousValue.fullname) {\n                    const parts = value.fullname.split(' ')\n                    setValue(entry + '.firstname', parts[0])\n                    setValue(entry + '.lastname', parts[1])\n                }\n                else if (value.firstname !== previousValue.firstname) {\n                    const lastname = getValue(entry + '.lastname') || ''\n                    setValue(entry + '.fullname', (value.firstname || '') + ' ' + lastname)\n                }\n                else if (value.lastname !== previousValue.lastname) {\n                    console.log(value.lastname)\n                    const firstname = getValue(entry + '.firstname') || ''\n                    setValue(entry + '.fullname', firstname + ' ' + (value.lastname || ''))\n                }\n            }\n        },\n        schema: {\n            fullname: {\n                type: \"string\"\n            },\n            firstname: {\n                type: \"string\"\n            },\n            lastname: {\n                type: \"string\"\n            }\n        }\n    }\n}`\n\nexport default schema","import { Form, type as types, constraints } from \"@maif/react-forms\";\nimport React, { useState } from \"react\";\nimport WrapperError from \"./WrapperError\";\nimport schema from \"./schema/storybook.json\";\n\nconst Storybook = () => {\n  const [filter, setFilter] = useState(types.string);\n  return (\n    <div className=\"container\" style={{ marginTop: \"70px\" }}>\n      <div className=\"d-flex\">\n        <div className=\"col-3\" style={{ marginRight: \"10px\" }}>\n          <div\n            style={{\n              backgroundColor: \"#ececec\",\n              marginTop: \"25px\",\n              marginRight: \"15px\",\n              padding: \"15px\"\n            }}\n          >\n            <b>Filter</b>\n            <ul>\n              {Object.keys(types).map((type) => (\n                <li\n                  key={`filter-${type}`}\n                  onClick={() => setFilter(type)}\n                  style={{\n                    cursor: \"pointer\",\n                    textDecoration: \"underline\",\n                    fontWeight: type === filter ? \"bold\" : \"normal\"\n                  }}\n                >\n                  {type}\n                </li>\n              ))}\n            </ul>\n          </div>\n        </div>\n        <div className=\"col-9\" style={{ marginRight: \"10px\" }}>\n            {Object.keys(schema)\n              .map((item) => ({ key: item, ...schema[item] }))\n              .filter(({ type }) => filter === type)\n              .map(({ key, ...item }, index) => (\n                <WrapperError key={`form-${key}-${index}`}>\n                  <label style={{ fontWeight: \"bold\" }}>\n                    Input type {item.type}\n                    {item.format && ` (format: ${item.format})`}\n                  </label>\n                  <div\n                    style={{\n                      backgroundColor: \"#ececec\",\n                      padding: \"10px 15px\",\n                      marginBottom: \"15px\"\n                    }}\n                  >\n                    <Form\n                      schema={{\n                        [key]: {\n                          constraints: [\n                            constraints.required(`${key} is required`)\n                          ],\n                          ...item\n                        }\n                      }}\n                      flow={[key]}\n                      onSubmit={(d) => alert(JSON.stringify(d, null, 2))}\n                      options={{actions:{submit:{label:\"Show It!\"}}}}\n                    />\n                  </div>\n                </WrapperError>\n              ))}\n        </div>\n      </div>\n    </div>\n  );\n};\nexport default Storybook;\n","import React, { useState } from \"react\";\n\nconst Tabs = ({ tabs, defaultTab }) => {\n  const [page, setPage] = useState(defaultTab);\n\n  return (\n    <div className=\"my-md-4 bd-layout\">\n      <nav className=\"navbar navbar-expand-lg navbar-light bg-light fixed-top\">\n        <div className=\"container-fluid\">\n          <span className=\"navbar-brand\">react-forms playground</span>\n          <button\n            className=\"navbar-toggler\"\n            type=\"button\"\n            data-bs-toggle=\"collapse\"\n            data-bs-target=\"#navbarSupportedContent\"\n            aria-controls=\"navbarSupportedContent\"\n            aria-expanded=\"false\"\n            aria-label=\"Toggle navigation\"\n          >\n            <span className=\"navbar-toggler-icon\"></span>\n          </button>\n          <div className=\"collapse navbar-collapse\" id=\"navbarSupportedContent\">\n            <ul className=\"navbar-nav me-auto mb-2 mb-lg-0\">\n              {tabs.map(({ id, label }) => (\n                <li className=\"nav-item\">\n                  <span className=\"nav-link\" onClick={() => setPage(id)}>\n                    {label}\n                  </span>\n                </li>\n              ))}\n              <li className=\"nav-item\">\n                <a\n                  className=\"nav-link\"\n                  href=\"https://github.com/MAIF/react-forms#readme\"\n                >\n                  Documentation\n                </a>\n              </li>\n              <li className=\"nav-item\">\n                <a\n                  className=\"nav-link\"\n                  href=\"https://github.com/MAIF/react-forms\"\n                >\n                  Project\n                </a>\n              </li>\n            </ul>\n          </div>\n        </div>\n      </nav>\n      <div className=\"container\" style={{ marginTop: \"70px\" }}>\n        {tabs.find(({ id }) => id === page)?.content}\n      </div>\n    </div>\n  );\n};\nexport default Tabs;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport Playground from './Playground';\nimport Storybook from './Storybook';\nimport Tabs from './Tabs';\nimport ReleaseCandidate from './ReleaseCandidate'\n\nReactDOM.render(\n  <React.StrictMode>\n    <Tabs tabs={[\n      {\n        id: \"playground\",\n        label: \"Playground\",\n        content: <Playground />\n      },\n      // {\n      //   id: \"release-candidate\",\n      //   label: \"Release Candidate\",\n      //   content: <ReleaseCandidate />\n      // },\n      {\n        id: \"storybook\",\n        label: \"Storybook\",\n        content: <Storybook />\n      }]}\n      defaultTab=\"playground\" />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}